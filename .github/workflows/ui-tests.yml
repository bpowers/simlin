# UI tests are temporarily disabled due to CI timeout issues.
# Run manually with: yarn test:ui
#
# name: UI Integration Tests
#
# on:
#   push:
#     branches: [main]
#     paths:
#       - 'src/app/**'
#       - 'src/diagram/**'
#       - 'src/server/**'
#       - 'ui-tests/**'
#       - '.github/workflows/ui-tests.yml'
#   pull_request:
#     branches: [main]
#     paths:
#       - 'src/app/**'
#       - 'src/diagram/**'
#       - 'src/server/**'
#       - 'ui-tests/**'
#       - '.github/workflows/ui-tests.yml'
#
# jobs:
#   ui-tests:
#     runs-on: ubuntu-latest
#
#     env:
#       RUSTFLAGS: -D warnings
#       RUST_BACKTRACE: 1
#
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4
#
#       - name: Install Protoc
#         uses: arduino/setup-protoc@v3
#         with:
#           repo-token: ${{ secrets.GITHUB_TOKEN }}
#
#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: '20'
#           cache: 'yarn'
#
#       - name: Install Rust toolchain
#         run: rustup show
#
#       - name: Cache Rust dependencies
#         uses: actions/cache@v4
#         with:
#           path: |
#             ~/.cargo/registry
#             ~/.cargo/git
#             target
#           key: ${{ runner.os }}-cargo-${{ hashFiles('**/Cargo.lock') }}
#           restore-keys: |
#             ${{ runner.os }}-cargo-
#
#       - name: Install dependencies and build project
#         run: |
#           rustup target add wasm32-unknown-unknown
#           yarn install --frozen-lockfile
#           DISABLE_WASM_OPT=1 yarn build
#
#       - name: Install Playwright browsers
#         run: npx playwright install chromium
#
#       - name: Setup Java 21
#         uses: actions/setup-java@v4
#         with:
#           distribution: 'temurin'
#           java-version: '21'
#
#       - name: Install Firestore emulator
#         run: |
#           curl -fsSL https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo gpg --dearmor -o /usr/share/keyrings/cloud.google.gpg
#           echo "deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main" | sudo tee /etc/apt/sources.list.d/google-cloud-sdk.list
#           sudo apt-get update
#           sudo apt-get install -y google-cloud-cli-firestore-emulator
#
#       - name: Run UI integration tests
#         run: yarn test:ui
#         env:
#           CI: true
#
#       - name: Upload test results
#         if: always()
#         uses: actions/upload-artifact@v4
#         with:
#           name: playwright-report
#           path: playwright-report/
#           retention-days: 30
